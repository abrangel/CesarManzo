<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cesar Manzo // RStudio AI Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Orbitron:wght@500;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CONFIGURACIÓN ESTÉTICA (Modo Oscuro Profesional) --- */
        :root {
            --bg-app: #1e212b; 
            --bg-panel: #282c34; 
            --border: #3b4048;
            --text-main: #abb2bf;
            --primary: #61afef; /* Azul RStudio */
            --accent: #98c379;  /* Verde */
            --keyword: #c678dd; /* Morado */
            --string: #98c379;
            --function: #e06c75; /* Rojo suave */
            --comment: #5c6370;
            --sidebar-w: 300px;
        }

        * { box-sizing: border-box; }
        body { margin: 0; padding: 0; background: var(--bg-app); font-family: 'Roboto', sans-serif; color: var(--text-main); height: 100vh; display: flex; overflow: hidden; }

        /* --- 1. SIDEBAR (TEMARIO COMPLETO) --- */
        .nav-sidebar {
            width: var(--sidebar-w); background: #181a1f; border-right: 1px solid #000;
            display: flex; flex-direction: column;
        }
        .nav-header { padding: 20px; border-bottom: 1px solid var(--border); }
        .nav-header h2 { margin: 0; font-family: 'Orbitron'; font-size: 1.1rem; color: var(--primary); }
        .nav-header span { font-size: 0.75rem; color: #5c6370; }
        
        .nav-items { overflow-y: auto; flex: 1; }
        .nav-items::-webkit-scrollbar { width: 6px; }
        .nav-items::-webkit-scrollbar-thumb { background: #3b4048; border-radius: 3px; }

        .topic-btn {
            display: block; width: 100%; padding: 12px 20px; text-align: left;
            background: transparent; border: none; color: var(--text-main); cursor: pointer;
            border-left: 3px solid transparent; transition: 0.2s; font-size: 0.85rem;
            border-bottom: 1px solid #21252b; display: flex; align-items: center;
        }
        .topic-btn:hover { background: #2c313a; color: #fff; }
        .topic-btn.active { background: #2c313a; border-left-color: var(--primary); color: var(--primary); font-weight: bold; }
        .topic-btn i { width: 25px; margin-right: 10px; text-align: center; color: var(--accent); font-size: 1rem; }
        .topic-btn small { display: block; font-size: 0.7rem; color: #5c6370; margin-left: 35px; margin-top: 2px; }

        /* --- 2. ÁREA PRINCIPAL --- */
        .main-stage { flex: 1; display: flex; flex-direction: column; padding: 5px; background: #3e4451; gap: 5px; }
        
        .rstudio-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 50% Código | 50% Plots */
            grid-template-rows: 1fr;
            gap: 5px;
            height: 100%;
        }

        .panel { background: var(--bg-panel); border: 1px solid var(--border); display: flex; flex-direction: column; border-radius: 2px; overflow: hidden; }

        /* --- EDITOR DE CÓDIGO --- */
        .editor-header {
            background: #21252b; padding: 5px 10px; font-size: 0.8rem; display: flex; gap: 5px; border-bottom: 1px solid var(--border);
        }
        .tab { background: #282c34; padding: 4px 12px; border-radius: 4px 4px 0 0; border-top: 2px solid var(--primary); color: #fff; display: flex; align-items: center; gap: 8px; font-size: 0.8rem;}
        
        .code-container {
            flex: 1; padding: 15px; overflow-y: auto; font-family: 'Fira Code', monospace; font-size: 0.9rem; line-height: 1.6;
            background: #282c34; color: #abb2bf;
        }
        /* Sintaxis R */
        .c-com { color: var(--comment); font-style: italic; }
        .c-kwd { color: var(--keyword); }
        .c-func { color: var(--primary); }
        .c-str { color: var(--string); }
        .c-num { color: #d19a66; }
        .c-args { color: #d19a66; }
        .c-op { color: #56b6c2; }

        /* --- CONSOLA --- */
        .console-divider {
            height: 25px; background: #21252b; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);
            display: flex; align-items: center; padding: 0 10px; font-size: 0.75rem; color: #9da5b4;
        }
        .console-output {
            height: 30%; overflow-y: auto; background: #21252b; color: #abb2bf; padding: 10px; font-family: 'Fira Code', monospace; font-size: 0.85rem; border-top: 1px solid #333;
        }

        /* --- VISOR DE PLOTS --- */
        .plot-tabs { background: #f0f0f0; border-bottom: 1px solid #ccc; padding: 2px 8px; display: flex; gap: 2px; height: 28px; }
        .pt-tab { padding: 4px 10px; font-size: 0.75rem; color: #333; cursor: pointer; border: 1px solid transparent; border-radius: 3px 3px 0 0; }
        .pt-tab.active { background: #fff; border-color: #ccc #ccc #fff #ccc; font-weight: 600; }
        
        .plot-toolbar { background: #fff; padding: 4px 10px; border-bottom: 1px solid #eee; display: flex; gap: 15px; font-size: 0.8rem; color: #444; }
        
        .plot-area {
            flex: 1; background: #fff; padding: 20px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; position: relative; overflow: hidden;
        }

        /* --- ELEMENTOS GRÁFICOS SIMULADOS --- */
        .chart-title { font-weight: bold; font-size: 1rem; margin-bottom: 15px; color: #333; text-align: center; }
        .axis-label { font-size: 0.75rem; color: #666; position: absolute; }
        
        /* Scatter / PCA / t-SNE Box */
        .scatter-box { width: 300px; height: 250px; border-left: 2px solid #333; border-bottom: 2px solid #333; position: relative; }
        .dot { position: absolute; width: 8px; height: 8px; border-radius: 50%; opacity: 0.7; transition: all 0.5s; }
        
        /* Dendrograma Simulado */
        .dendro-box { width: 300px; height: 200px; position: relative; border-bottom: 1px solid #ccc; }
        .dendro-line { position: absolute; border: 1px solid #333; }
        
        /* Bar Chart */
        .bar-chart { width: 90%; display: flex; flex-direction: column; gap: 8px; }
        .bar-row { display: flex; align-items: center; gap: 10px; }
        .bar-label { width: 120px; text-align: right; font-size: 0.75rem; color: #333; font-weight: 500;}
        .bar-track { flex: 1; background: #eee; height: 10px; border-radius: 2px; }
        .bar-fill { height: 100%; background: #4682b4; }

        /* Decision Tree Simulado */
        .tree-node { width: 80px; padding: 5px; border: 1px solid #333; background: #fff; text-align: center; font-size: 0.7rem; position: absolute; border-radius: 4px; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); }
        .tree-line { position: absolute; background: #333; width: 1px; }

    </style>
</head>
<body>

    <div class="nav-sidebar">
        <div class="nav-header">
            <h2>R_STUDIO :: MASTER</h2>
            <span>Bioinformática & IA</span>
        </div>
        <div class="nav-items" id="navItems">
            </div>
    </div>

    <div class="main-stage">
        
        <div class="rstudio-grid">
            
            <div class="panel">
                <div class="editor-header">
                    <div class="tab">
                        <i class="fas fa-file-code"></i>
                        <span id="scriptName">script.R</span>
                    </div>
                </div>
                
                <div class="code-container" id="codeArea">
                    </div>

                <div class="console-divider">
                    <span>Console Terminal Background Jobs</span>
                    <span style="margin-left: auto;"><i class="fas fa-window-minimize"></i></span>
                </div>

                <div class="console-output">
                    <div style="color: #5c6370;">R version 4.4.1 (2025) -- "Bio-AI Build"</div>
                    <div id="consoleOutput">
                        <span style="color: #61afef;">></span> # Selecciona un tema del menú...
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="plot-tabs">
                    <div class="pt-tab">Files</div>
                    <div class="pt-tab active">Plots</div>
                    <div class="pt-tab">Packages</div>
                    <div class="pt-tab">Help</div>
                    <div class="pt-tab">Viewer</div>
                </div>
                
                <div class="plot-toolbar">
                    <i class="fas fa-arrow-left"></i>
                    <i class="fas fa-arrow-right"></i>
                    <span><i class="fas fa-search-plus"></i> Zoom</span>
                    <span><i class="fas fa-file-export"></i> Export</span>
                    <i class="fas fa-trash-alt" style="margin-left: auto;"></i>
                </div>

                <div class="plot-area" id="plotArea">
                    </div>
            </div>

        </div>
    </div>

    <script>
        // --- BASE DE DATOS EXTENDIDA SEGÚN TUS PDFs ---
        const topics = [
            {
                id: 0, title: "0. Intro & Setup R", icon: "fa-terminal", scriptName: "setup_init.R",
                desc: "Configuración inicial y limpieza",
                code: `
<span class="c-com"># TEMA 0: SETUP DEL ENTORNO</span>
<span class="c-com"># ===========================</span>
<span class="c-com"># Limpieza del workspace antes de iniciar</span>
<span class="c-func">rm</span>(<span class="c-args">list</span> = <span class="c-func">ls</span>())

<span class="c-com"># Descargar paquetes base si es necesario</span>
<span class="c-kwd">if</span>(<span class="c-str">"datasets"</span> %in% <span class="c-func">search</span>()) {
    <span class="c-func">detach</span>(<span class="c-str">"package:datasets"</span>, <span class="c-args">unload</span> = <span class="c-num">TRUE</span>)
}

<span class="c-com"># Instalar librerías clave del curso</span>
<span class="c-func">install.packages</span>(<span class="c-func">c</span>(<span class="c-str">"caret"</span>, <span class="c-str">"ggplot2"</span>, <span class="c-str">"cluster"</span>, 
                   <span class="c-str">"randomForest"</span>, <span class="c-str">"xgboost"</span>))

<span class="c-func">print</span>(<span class="c-str">"Entorno Bio-AI listo."</span>)
`,
                console: `> [1] "Entorno Bio-AI listo."<br>> Memory usage: 142 MiB`,
                plotType: "none"
            },
            {
                id: 1, title: "1. Intro IA & ML", icon: "fa-brain", scriptName: "intro_ia.R",
                desc: "Tipos de ML y Preprocesamiento",
                code: `
<span class="c-com"># TEMA 1: INTRODUCCIÓN A LA INTELIGENCIA ARTIFICIAL</span>
<span class="c-com"># =================================================</span>
<span class="c-com"># Preprocesamiento de datos clínicos</span>
<span class="c-kwd">library</span>(caret)

<span class="c-com"># Cargar datos simulados de pacientes</span>
datos <- <span class="c-func">read.csv</span>(<span class="c-str">"pacientes_cancer.csv"</span>)

<span class="c-com"># Normalización (Centrar y Escalar)</span>
<span class="c-com"># Importante para algoritmos sensibles a la escala (KNN, SVM)</span>
preProc <- <span class="c-func">preProcess</span>(datos, <span class="c-args">method</span> = <span class="c-func">c</span>(<span class="c-str">"center"</span>, <span class="c-str">"scale"</span>))
datos_norm <- <span class="c-func">predict</span>(preProc, datos)

<span class="c-func">summary</span>(datos_norm)
`,
                console: `> Min.   :-2.45<br>> 1st Qu.:-0.67<br>> Median : 0.00<br>> Mean   : 0.00 (Centered)<br>> 3rd Qu.: 0.65`,
                plotType: "venn"
            },
            {
                id: 2, title: "2. Dim Red I (PCA/t-SNE)", icon: "fa-compress-arrows-alt", scriptName: "pca_tsne.R",
                desc: "Métodos lineales y probabilísticos",
                code: `
<span class="c-com"># TEMA 2: REDUCCIÓN DIMENSIONALIDAD I</span>
<span class="c-com"># ===================================</span>
<span class="c-kwd">library</span>(RDRToolbox)

<span class="c-com"># 1. PCA: Maximiza varianza (Lineal)</span>
pca_res <- <span class="c-func">prcomp</span>(iris[,1:4], <span class="c-args">scale.</span> = <span class="c-num">TRUE</span>)
<span class="c-func">biplot</span>(pca_res, <span class="c-args">scale</span> = <span class="c-num">0</span>)

<span class="c-com"># 2. t-SNE: Probabilístico (No Lineal)</span>
<span class="c-com"># Ideal para visualización en 2D/3D</span>
<span class="c-kwd">library</span>(Rtsne)
tsne_out <- <span class="c-func">Rtsne</span>(unique_data, <span class="c-args">dims</span> = <span class="c-num">2</span>, 
                  <span class="c-args">perplexity</span> = <span class="c-num">30</span>, 
                  <span class="c-args">verbose</span> = <span class="c-num">TRUE</span>)

<span class="c-func">plot</span>(tsne_out$Y, <span class="c-args">col</span>=clases, <span class="c-args">main</span>=<span class="c-str">"t-SNE Plot"</span>)
`,
                console: `> PCA: PC1 explica 72.9% de varianza.<br>> t-SNE: Iteration 1000, error final: 0.24`,
                plotType: "pca"
            },
            {
                id: 3, title: "3. Dim Red II (UMAP)", icon: "fa-project-diagram", scriptName: "umap_lle.R",
                desc: "Manifolds complejos y Topología",
                code: `
<span class="c-com"># TEMA 3: REDUCCIÓN DIMENSIONALIDAD II</span>
<span class="c-com"># ====================================</span>
<span class="c-com"># UMAP: Preserva estructura global mejor que t-SNE</span>
<span class="c-kwd">library</span>(uwot)

<span class="c-com"># Ejecución de UMAP (rápido y escalable)</span>
umap_res <- <span class="c-func">umap</span>(datos_genomicos, 
                 <span class="c-args">n_neighbors</span> = <span class="c-num">15</span>, 
                 <span class="c-args">n_components</span> = <span class="c-num">2</span>, 
                 <span class="c-args">metric</span> = <span class="c-str">"euclidean"</span>)

<span class="c-com"># LLE (Locally Linear Embedding)</span>
<span class="c-com"># Mantiene vecindad local</span>
<span class="c-kwd">library</span>(RDRToolbox)
lle_res <- <span class="c-func">LLE</span>(data, <span class="c-args">dim</span>=<span class="c-num">2</span>, <span class="c-args">k</span>=<span class="c-num">10</span>)
`,
                console: `> UMAP terminado en 1.45s.<br>> Preservando topología del manifold.<br>> ICA (Independent Comp. Analysis) listo.`,
                plotType: "umap"
            },
            {
                id: 4, title: "4. Clustering", icon: "fa-object-group", scriptName: "clustering.R",
                desc: "K-Means y Jerárquico",
                code: `
<span class="c-com"># TEMA 4: CLUSTERIZACIÓN</span>
<span class="c-com"># ======================</span>
<span class="c-kwd">library</span>(cluster)

<span class="c-com"># 1. Matriz de distancias</span>
dist_matrix <- <span class="c-func">dist</span>(data_muestras)

<span class="c-com"># 2. Clustering Jerárquico (Aglomerativo)</span>
<span class="c-com"># Métodos Linkage: single, complete, average, ward.D2</span>
hc <- <span class="c-func">hclust</span>(dist_matrix, <span class="c-args">method</span> = <span class="c-str">"ward.D2"</span>)

<span class="c-com"># Visualizar Dendrograma</span>
<span class="c-func">plot</span>(hc, <span class="c-args">hang</span> = <span class="c-num">-1</span>)
<span class="c-func">rect.hclust</span>(hc, <span class="c-args">k</span>=<span class="c-num">3</span>, <span class="c-args">border</span>=<span class="c-str">"red"</span>)

<span class="c-com"># 3. K-Means (No jerárquico)</span>
km <- <span class="c-func">kmeans</span>(data_muestras, <span class="c-args">centers</span>=<span class="c-num">3</span>)
`,
                console: `> hclust: Método Ward minimiza varianza intra-cluster.<br>> K-means: WSS = 78.4 (k=3)`,
                plotType: "dendro"
            },
            {
                id: 5, title: "5. Discriminante (LDA/QDA)", icon: "fa-columns", scriptName: "lda_qda.R",
                desc: "Clasificación Lineal y Cuadrática",
                code: `
<span class="c-com"># TEMA 5: ANÁLISIS DISCRIMINANTE</span>
<span class="c-com"># ==============================</span>
<span class="c-kwd">library</span>(MASS)

<span class="c-com"># LDA: Asume igualdad de covarianzas (homocedasticidad)</span>
<span class="c-com"># Genera fronteras lineales</span>
lda_mod <- <span class="c-func">lda</span>(Species ~ ., <span class="c-args">data</span> = iris)

<span class="c-com"># QDA: Permite covarianzas distintas por clase</span>
<span class="c-com"># Genera fronteras curvas (parabólicas)</span>
qda_mod <- <span class="c-func">qda</span>(Species ~ ., <span class="c-args">data</span> = iris)

<span class="c-func">plot</span>(lda_mod)
`,
                console: `> LDA Prior probabilities:<br> setosa: 0.33, versicolor: 0.33, virginica: 0.33<br>> Group means calculadas.`,
                plotType: "separation"
            },
            {
                id: 6, title: "6. Superv. I (Trees/SVM)", icon: "fa-sitemap", scriptName: "trees_svm.R",
                desc: "Árboles y Vectores de Soporte",
                code: `
<span class="c-com"># TEMA 6: MÉTODOS SUPERVISADOS I</span>
<span class="c-com"># ==============================</span>
<span class="c-kwd">library</span>(caret); <span class="c-kwd">library</span>(rpart); <span class="c-kwd">library</span>(rattle)

<span class="c-com"># 1. Árbol de Decisión (CART)</span>
dt_model <- <span class="c-func">train</span>(Clase ~ ., <span class="c-args">data</span> = trainData,
                  <span class="c-args">method</span> = <span class="c-str">"rpart"</span>,
                  <span class="c-args">trControl</span> = <span class="c-func">trainControl</span>(<span class="c-args">method</span>=<span class="c-str">"cv"</span>))

<span class="c-com"># Visualizar Árbol</span>
<span class="c-func">fancyRpartPlot</span>(dt_model$finalModel)

<span class="c-com"># 2. SVM (Kernel Radial)</span>
<span class="c-kwd">library</span>(e1071)
svm_mod <- <span class="c-func">svm</span>(Clase ~ ., <span class="c-args">kernel</span>=<span class="c-str">"radial"</span>, <span class="c-args">cost</span>=<span class="c-num">10</span>)
`,
                console: `> CART: cp óptimo seleccionado por Cross-Validation.<br>> SVM: 45 vectores de soporte identificados.`,
                plotType: "tree"
            },
            {
                id: 7, title: "7. Superv. II (Ensemble)", icon: "fa-layer-group", scriptName: "rf_boosting.R",
                desc: "Random Forest & Boosting",
                code: `
<span class="c-com"># TEMA 7: MÉTODOS SUPERVISADOS II (ENSEMBLE)</span>
<span class="c-com"># ==========================================</span>
<span class="c-kwd">library</span>(randomForest); <span class="c-kwd">library</span>(xgboost)

<span class="c-com"># 1. Random Forest (Bagging)</span>
<span class="c-com"># Crea múltiples árboles independientes y promedia</span>
rf <- <span class="c-func">randomForest</span>(Clase ~ ., <span class="c-args">ntree</span>=<span class="c-num">500</span>, <span class="c-args">importance</span>=<span class="c-num">TRUE</span>)
<span class="c-func">varImpPlot</span>(rf)

<span class="c-com"># 2. Gradient Boosting (Boosting)</span>
<span class="c-com"># Secuencial: corrige errores del anterior (residuos)</span>
xgb <- <span class="c-func">xgboost</span>(<span class="c-args">data</span> = as.matrix(train_x), 
               <span class="c-args">label</span> = train_y, 
               <span class="c-args">nrounds</span> = <span class="c-num">100</span>, 
               <span class="c-args">objective</span> = <span class="c-str">"binary:logistic"</span>)
`,
                console: `> Random Forest: OOB Error = 2.13%<br>> XGBoost: Iter 100, LogLoss = 0.045`,
                plotType: "rf_imp"
            }
        ];

        // --- RENDERIZADO VISUAL ---
        function loadNav() {
            const container = document.getElementById('navItems');
            topics.forEach((t, i) => {
                const btn = document.createElement('button');
                btn.className = `topic-btn ${i===1 ? 'active' : ''}`; // Tema 1 por defecto
                btn.onclick = () => selectTopic(i);
                btn.innerHTML = `
                    <div><i class="fas ${t.icon}"></i> ${t.title}</div>
                    <small>${t.desc}</small>
                `;
                container.appendChild(btn);
            });
            selectTopic(1);
        }

        function selectTopic(index) {
            document.querySelectorAll('.topic-btn').forEach((b, i) => b.classList.toggle('active', i === index));
            const data = topics[index];
            
            // Cargar datos en paneles
            document.getElementById('scriptName').innerText = data.scriptName;
            document.getElementById('codeArea').innerHTML = data.code;
            document.getElementById('consoleOutput').innerHTML = `<span style="color: #61afef;">></span> ${data.console}`;
            
            renderPlot(data.plotType, data.title);
        }

        function renderPlot(type, title) {
            const area = document.getElementById('plotArea');
            area.innerHTML = ''; // Limpiar
            let html = `<div class="chart-title">${title} - Visualización</div>`;
            
            if (type === 'none') {
                 html += `<div style="text-align:center; color:#666; margin-top:50px;">Entorno listo. No hay gráficos generados.</div>`;
            } else if (type === 'venn') {
                html += `
                <div style="position:relative; width:220px; height:220px;">
                    <div style="position:absolute; border:2px solid #61afef; width:220px; height:220px; border-radius:50%; display:flex; justify-content:center; padding-top:10px; color:#61afef; font-weight:bold;">IA</div>
                    <div style="position:absolute; border:2px solid #98c379; width:160px; height:160px; top:30px; left:30px; border-radius:50%; display:flex; justify-content:center; padding-top:10px; color:#98c379; font-weight:bold;">ML</div>
                    <div style="position:absolute; border:2px solid #e06c75; width:90px; height:90px; top:65px; left:65px; border-radius:50%; display:flex; justify-content:center; align-items:center; color:#e06c75; font-weight:bold;">DL</div>
                </div>`;
            } else if (type === 'pca') {
                html += `
                <div class="scatter-box">
                    <div class="axis-label" style="bottom:-20px; width:100%; text-align:center;">PC1 (72.9%)</div>
                    <div class="axis-label" style="left:-30px; top:40%; transform:rotate(-90deg);">PC2 (22.8%)</div>
                    ${generateDots(25, '#e06c75')} ${generateDots(25, '#61afef', '30px')}
                    <div style="position:absolute; width:80px; height:2px; background:#333; top:50%; left:50%; transform:rotate(-20deg);"></div>
                    <div style="position:absolute; width:60px; height:2px; background:#333; top:50%; left:50%; transform:rotate(60deg);"></div>
                </div>`;
            } else if (type === 'umap') {
                html += `
                <div class="scatter-box" style="border:none;">
                    ${generateDots(30, '#98c379', '-50px')}
                    ${generateDots(30, '#e06c75', '50px')}
                    ${generateDots(30, '#61afef', '0px')}
                    <div style="position:absolute; bottom:10px; right:10px; font-size:0.7rem; color:#666;">Islands Structure (Manifolds)</div>
                </div>`;
            } else if (type === 'dendro') {
                html += `
                <div class="dendro-box">
                    <div style="position:absolute; bottom:0; left:20%; width:1px; height:50px; background:#333;"></div>
                    <div style="position:absolute; bottom:0; left:30%; width:1px; height:50px; background:#333;"></div>
                    <div style="position:absolute; bottom:50px; left:20%; width:10%; height:1px; background:#333;"></div>
                    <div style="position:absolute; bottom:50px; left:25%; width:1px; height:30px; background:#333;"></div>
                    
                    <div style="position:absolute; bottom:0; left:60%; width:1px; height:80px; background:#333;"></div>
                    <div style="position:absolute; bottom:0; left:70%; width:1px; height:80px; background:#333;"></div>
                    <div style="position:absolute; bottom:80px; left:60%; width:10%; height:1px; background:#333;"></div>
                    <div style="position:absolute; bottom:80px; left:65%; width:1px; height:60px; background:#333;"></div>
                    
                    <div style="position:absolute; top:40px; left:25%; width:40%; height:1px; background:#333;"></div>
                    <div style="position:absolute; top:40px; left:45%; width:1px; height:20px; background:#333;"></div>
                    
                    <div style="position:absolute; top:60px; width:100%; height:1px; background:red; border-top:1px dashed red;"></div>
                </div>
                <div style="text-align:center; margin-top:5px; font-size:0.8rem;">hclust(method="ward.D2")</div>`;
            } else if (type === 'separation') { // LDA
                html += `
                <div class="scatter-box">
                     ${generateDots(20, '#e06c75', '-30px')}
                     ${generateDots(20, '#61afef', '40px')}
                     <div style="position:absolute; width:120%; height:2px; background:#333; top:50%; left:-10%; transform:rotate(45deg);"></div>
                     <div style="position:absolute; top:10px; right:10px; font-weight:bold; font-size:0.8rem;">LD1 vs LD2</div>
                </div>`;
            } else if (type === 'tree') {
                html += `
                <div style="position:relative; width:300px; height:250px;">
                    <div class="tree-node" style="top:10px; left:110px;">Gene_A < 2.5</div>
                    <div class="tree-line" style="top:40px; left:150px; height:30px;"></div>
                    
                    <div style="position:absolute; top:70px; left:50px; width:100px; height:1px; background:#333;"></div>
                    <div class="tree-line" style="top:70px; left:50px; height:20px;"></div>
                    <div class="tree-line" style="top:70px; left:250px; height:20px;"></div>
                    
                    <div class="tree-node" style="top:90px; left:10px; background:#e0f7fa;">Si</div>
                    <div class="tree-node" style="top:90px; left:210px;">Gene_B > 10</div>
                    
                    <div class="tree-line" style="top:120px; left:250px; height:30px;"></div>
                    <div style="position:absolute; top:150px; left:200px; width:100px; height:1px; background:#333;"></div>
                     <div class="tree-line" style="top:150px; left:200px; height:20px;"></div>
                    <div class="tree-line" style="top:150px; left:300px; height:20px;"></div>
                    
                    <div class="tree-node" style="top:170px; left:160px; background:#ffebee;">Clase 1</div>
                    <div class="tree-node" style="top:170px; left:260px; background:#e8f5e9;">Clase 2</div>
                </div>`;
            } else if (type === 'rf_imp') {
                html += `
                <div class="bar-chart">
                    ${makeBar('TP53_mut', 95)} ${makeBar('Age', 80)} ${makeBar('BMI_Index', 60)} 
                    ${makeBar('Blood_Press', 45)} ${makeBar('Gene_BRCA', 30)}
                    <div style="font-size:0.75rem; text-align:center; margin-top:10px; color:#666;">Relative Influence (Importance)</div>
                </div>`;
            }

            area.innerHTML = html;
        }

        // Helpers
        function generateDots(n, color, offset='0px') {
            let html = '';
            for(let i=0; i<n; i++) {
                let t = Math.random()*70 + 15;
                let l = Math.random()*70 + 15;
                if(offset !== '0px') { l += parseInt(offset); t += parseInt(offset)/2; }
                html += `<div class="dot" style="top:${t}%; left:${l}%; background:${color};"></div>`;
            }
            return html;
        }

        function makeBar(label, width) {
            return `
            <div class="bar-row">
                <div class="bar-label">${label}</div>
                <div class="bar-track"><div class="bar-fill" style="width:${width}%;"></div></div>
            </div>`;
        }

        // Init
        window.onload = loadNav;

    </script>
</body>
</html>